(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{1716:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(5155),n=r(2115),o=r(5695),a=r(1349);r(5716);var l=r(6766),i=r(6403);let d=()=>{let[e,t]=(0,n.useState)(!1),[r,d]=(0,n.useState)(null),c=(0,n.useRef)(null),u=(0,o.useRouter)();(0,n.useEffect)(()=>{m();let e=e=>{c.current&&!c.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let m=async()=>{try{let e=await i.FH.checkAuth();e.data.authenticated?d(e.data.user):u.push("/")}catch(e){console.error("Auth check failed:",e),u.push("/")}},x=async()=>{try{await i.FH.signout(),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),a.oR.success("Logged out successfully! See you again! \uD83D\uDC4B"),u.push("/")}catch(e){console.error("Logout failed:",e),a.oR.error("Logout failed")}},h=()=>(null==r?void 0:r.username)?r.username.charAt(0).toUpperCase():"A";return(0,s.jsx)("header",{className:"bg-white/95 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-50 shadow-lg",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 lg:h-20",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"h-12 lg:h-16 w-auto relative",children:(0,s.jsx)(l.default,{src:"/LOGO.png",width:200,height:80,alt:"Farmers Fertilizer Logo",priority:!0,className:"h-full w-auto object-contain"})}),(0,s.jsxs)("div",{className:"hidden md:block",children:[(0,s.jsx)("div",{className:"text-lg lg:text-xl font-bold text-gray-800",children:"Farmers Fertilizer"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Management System"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"hidden lg:block text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:(()=>{let e=new Date().getHours();return e<12?"\uD83C\uDF05 Good Morning":e<17?"☀️ Good Afternoon":"\uD83C\uDF19 Good Evening"})()}),(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:(null==r?void 0:r.username)||"Admin"})]}),(0,s.jsxs)("div",{className:"relative",ref:c,children:[(0,s.jsxs)("button",{onClick:()=>t(!e),className:"group flex items-center gap-3 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 border border-blue-200 hover:border-blue-300 rounded-2xl p-3 transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",title:"User Menu",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:h()}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex flex-col items-start",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-800 leading-tight",children:(null==r?void 0:r.username)||"Admin"}),(0,s.jsx)("span",{className:"text-xs text-blue-600 capitalize leading-tight font-medium",children:(null==r?void 0:r.role)||"Administrator"})]}),(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-600 transition-transform duration-300 group-hover:text-blue-600 ".concat(e?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e&&(0,s.jsxs)("div",{className:"absolute right-0 top-full mt-3 w-64 bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200/50 py-2 z-50 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 py-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:h()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-base font-semibold text-gray-900 truncate",children:(null==r?void 0:r.username)||"Admin"}),(0,s.jsx)("p",{className:"text-sm text-blue-600 capitalize truncate font-medium",children:(null==r?void 0:r.role)||"Administrator"}),(null==r?void 0:r.lastLogin)&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["Last login: ",new Date(r.lastLogin).toLocaleDateString()]})]})]})}),(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"System Status: Online"})]})}),(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 text-gray-700",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]}),(0,s.jsx)("div",{className:"border-t border-gray-100 py-2",children:(0,s.jsxs)("button",{className:"w-full px-4 py-3 text-left hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 transition-all duration-200 flex items-center gap-3 text-red-600 hover:text-red-700 group",onClick:x,children:[(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg group-hover:bg-red-200 transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Sign Out"}),(0,s.jsx)("div",{className:"text-xs text-red-500",children:"Logout securely"})]})]})})]})]})]})]})})})},c=(0,n.createContext)(),u=e=>{let{children:t}=e,[r,o]=(0,n.useState)(!1),[a,l]=(0,n.useState)("add"),[i,d]=(0,n.useState)(null);return(0,s.jsx)(c.Provider,{value:{isOpen:r,modalType:a,modalData:i,openModal:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(e),d(t),o(!0)},closeModal:()=>{o(!1),l("add"),d(null)}},children:t})},m=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useModal must be used within a ModalProvider");return e},x=e=>{let{products:t=[],onProductSelect:r,onRefresh:o}=e,{openModal:a}=m(),[l,i]=(0,n.useState)(null),[d,c]=(0,n.useState)(!1),[u,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),g=(0,n.useRef)(null),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let f=e=>{i(e),c(!1),x(""),r&&r(e)},v=async()=>{p(!0),o&&await o(),p(!1)},j=t.filter(e=>{let t=(null==e?void 0:e.name)||"",r=(null==e?void 0:e.productId)||"",s=(null==e?void 0:e.shortDescription)||"",n=(u||"").toLowerCase();return t.toLowerCase().includes(n)||r.toLowerCase().includes(n)||s.toLowerCase().includes(n)}),w=e=>{if(!e)return null;if(e.startsWith("https://storage.googleapis.com/")||e.startsWith("http"))return e.split(",")[0].trim();if(e.startsWith("/"))return"".concat("https://your-railway-app.railway.app").concat(e.split(",")[0].trim());let t=e.split(",")[0].trim();return"https://storage.googleapis.com/famerce/products/".concat(t)};return(0,s.jsxs)("div",{className:"relative mb-8",ref:g,children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{onClick:()=>{c(!d),d||setTimeout(()=>{var e;null==(e=b.current)||e.focus()},100)},className:"relative w-full p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 bg-white shadow-lg hover:shadow-xl ".concat(l?"border-blue-500 bg-gradient-to-r from-blue-50 to-indigo-50":"border-gray-200 hover:border-blue-300"),children:[l?(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-100 to-indigo-200 flex-shrink-0 shadow-md",children:l.imagePath?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:w(l.imagePath),alt:l.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,s.jsx)("div",{className:"hidden w-full h-full flex items-center justify-center text-blue-600",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-blue-600",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-blue-900 truncate",children:l.name}),(0,s.jsx)("p",{className:"text-blue-700 text-sm truncate mt-1",children:l.shortDescription||"No description"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsxs)("span",{className:"text-xs bg-blue-200 text-blue-800 px-3 py-1 rounded-full font-medium",children:["ID: ",l.productId]}),(0,s.jsxs)("span",{className:"text-xs bg-green-200 text-green-800 px-3 py-1 rounded-full font-medium",children:[l.batches&&l.batches.length||0," batches"]})]})]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-700",children:h?"Loading products...":"Select a fertilizer product"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Click here to choose from available products"})]})]}),(0,s.jsx)("div",{className:"absolute right-6 top-1/2 transform -translate-y-1/2",children:h?(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}):(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-400 transition-transform duration-300 ".concat(d?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),d&&(0,s.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-3 bg-white border border-gray-200 rounded-2xl shadow-2xl z-50 overflow-hidden max-h-96 backdrop-blur-lg",children:[(0,s.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:b,type:"text",className:"w-full px-4 py-3 pl-12 text-base border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-3 focus:ring-blue-200 focus:border-blue-400 transition-all duration-200 bg-white",placeholder:"\uD83D\uDD0D Search fertilizers...",value:u,onChange:e=>x(e.target.value)}),(0,s.jsx)("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),(0,s.jsxs)("div",{className:"flex gap-3 p-4 border-b border-gray-100 bg-gray-50",children:[(0,s.jsxs)("button",{onClick:()=>{c(!1),a("add")},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Product"]}),(0,s.jsx)("button",{onClick:v,disabled:h,className:"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",title:"Refresh products",children:(0,s.jsx)("svg",{className:"w-5 h-5 ".concat(h?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,s.jsx)("div",{className:"max-h-80 overflow-y-auto",children:j.length>0?j.map(e=>{var t,r,n,o,a;return(0,s.jsx)("button",{onClick:()=>f(e),className:"w-full p-4 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200 border-b border-gray-100 last:border-b-0 group text-left",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 flex-shrink-0 rounded-xl overflow-hidden bg-gradient-to-br from-blue-100 to-indigo-200 border border-blue-200 group-hover:border-blue-300 transition-all duration-200 shadow-sm",children:e.imagePath?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:w(e.imagePath),alt:e.name||"Product",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,s.jsx)("div",{className:"hidden w-full h-full flex items-center justify-center text-blue-500",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-blue-500",children:(0,s.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-semibold text-gray-800 text-left truncate text-lg group-hover:text-blue-700 transition-colors duration-200",children:e.name||"Unnamed Product"}),(0,s.jsx)("div",{className:"text-sm text-gray-600 text-left truncate",children:e.shortDescription||"No description"}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 text-left truncate mt-1 font-mono",children:["ID: ",e.productId||"No ID"]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1 ml-3",children:[(0,s.jsxs)("span",{className:"text-xs bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 px-3 py-1 rounded-full font-medium",children:[e.batches&&e.batches.length||0," batches"]}),(null==(t=e.summary)?void 0:t.expiringSoon)>0&&(0,s.jsxs)("span",{className:"text-xs bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-800 px-3 py-1 rounded-full font-medium",children:[e.summary.expiringSoon," expiring"]}),(null==(r=e.summary)?void 0:r.expiredBatches)>0&&(0,s.jsxs)("span",{className:"text-xs bg-gradient-to-r from-red-100 to-pink-100 text-red-800 px-3 py-1 rounded-full font-medium",children:[e.summary.expiredBatches," expired"]})]})]}),e.batches&&e.batches.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Active: ",(null==(n=e.summary)?void 0:n.activeBatches)||0]})]}),(null==(o=e.summary)?void 0:o.expiringSoon)>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Expiring: ",e.summary.expiringSoon]})]}),(null==(a=e.summary)?void 0:a.expiredBatches)>0&&(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600",children:["Expired: ",e.summary.expiredBatches]})]})]})]})]})},e.productId||e.id)}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:u?"No products found":"No products available"}),(0,s.jsx)("p",{className:"text-gray-500",children:u?"Try adjusting your search terms":'Click "Add New Product" to get started'})]})}),t.length>0&&(0,s.jsx)("div",{className:"px-4 py-3 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-gray-200 text-center",children:(0,s.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:j.length===t.length?"".concat(t.length," total products"):"".concat(j.length," of ").concat(t.length," products")})})]})]})};var h=r(3464);let p="https://your-railway-app.railway.app",g=e=>{let{onSuccess:t}=e,{isOpen:r,closeModal:o}=m(),[l,i]=(0,n.useState)(!1),[d,c]=(0,n.useState)(1),u=(0,n.useRef)(null),x=(0,n.useRef)(null),g=(0,n.useRef)(null),b=(0,n.useRef)(null),[f,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)([""]),[k,C]=(0,n.useState)([""]),[L,M]=(0,n.useState)([""]),[D,B]=(0,n.useState)([""]),[P,I]=(0,n.useState)([""]),[W,F]=(0,n.useState)([""]),[S,R]=(0,n.useState)({productId:"",productName:"",productImage:null,shortDescription:"",fullDescription:"",npsApprovalFiles:[],msdsFiles:[],batchNumber:"",manufacturingDate:"",expiryDate:"",ingredients:"",applicationInstructions:"",recommendedCrops:"",advantages:"",ppeInstructions:"",ppeTitle:"Personal Protective Equipment",workHygienicPractices:"",hygieneTitle:"Work Hygienic Practices",certificationsFiles:[],contactAddress:"Gonagodalla road, Pelwatte, Buttala.",contactPhones:"+94 557284040",contactEmail:"info@farmersfert.com",contactWebsite:"www.farmersfert.com"});(0,n.useEffect)(()=>{if(S.productName&&!S.productId){let e=S.productName.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,30);R(t=>({...t,productId:e}))}else!S.productName&&S.productId&&R(e=>({...e,productId:""}))},[S.productName]),(0,n.useEffect)(()=>{if(S.productImage){let e=new FileReader;e.onloadend=()=>v(e.result),e.readAsDataURL(S.productImage)}else v(null)},[S.productImage]),(0,n.useEffect)(()=>{R(e=>({...e,ingredients:k.filter(e=>e.trim()).join("\n"),advantages:L.filter(e=>e.trim()).join("\n"),recommendedCrops:D.filter(e=>e.trim()).join("\n"),applicationInstructions:y.filter(e=>e.trim()).join("\n"),ppeInstructions:P.filter(e=>e.trim()).join("\n"),ppeTitle:"Personal Protective Equipment",workHygienicPractices:W.filter(e=>e.trim()).join("\n"),hygieneTitle:"Work Hygienic Practices"}))},[k,D,y,P,W,L]);let E=()=>{R({productId:"",productName:"",productImage:null,shortDescription:"",fullDescription:"",npsApprovalFiles:[],msdsFiles:[],batchNumber:"",manufacturingDate:"",expiryDate:"",ingredients:"",applicationInstructions:"",recommendedCrops:"",advantages:"",ppeInstructions:"",ppeTitle:"Personal Protective Equipment",workHygienicPractices:"",hygieneTitle:"Work Hygienic Practices",certificationsFiles:[],contactAddress:"Gonagodalla road, Pelwatte, Buttala.",contactPhones:"+94 557284040",contactEmail:"info@farmersfert.com",contactWebsite:"www.farmersfert.com"}),N([""]),C([""]),M([""]),B([""]),I([""]),F([""]),v(null),c(1),u.current&&(u.current.value=""),x.current&&(x.current.value=""),g.current&&(g.current.value=""),b.current&&(b.current.value="")},A=()=>{l||(o(),E())},H=e=>{let{name:t,value:r}=e.target;R(e=>({...e,[t]:r}))},z=(e,t,r,s)=>{let n=[...s];n[e]=t,r(n)},T=(e,t,r,s)=>{let n=[...s];n[e]=t,r(n)},O=e=>{e(e=>[...e,""])},V=e=>{e(e=>[...e,""])},U=(e,t,r)=>{t(r.filter((t,r)=>r!==e))},q=(e,t,r)=>{let s=r.filter((t,r)=>r!==e);t(0===s.length?[""]:s)},G=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)},_=e=>["image/png","image/jpeg","image/jpg"].includes(e.type)?e.size>5242880?void a.oR.error("Image size must be less than 5MB"):void R(t=>({...t,productImage:e})):void a.oR.error("Only PNG, JPG, or JPEG images are allowed"),Q=(e,t)=>{let r=Array.from(e.target.files);if(r.length>0){let e=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],s=r.filter(t=>e.includes(t.type)?!(t.size>5242880)||(a.oR.error("".concat(t.name,": File size must be less than 5MB")),!1):(a.oR.error("".concat(t.name,": Only PDF, DOC, or DOCX files are allowed")),!1));R(e=>({...e,[t]:s}))}},J=(e,t)=>{R(r=>({...r,[e]:r[e].filter((e,r)=>r!==t)}))},X=e=>e.trim()?e.split("\n").filter(e=>e.trim()&&e.includes(":")).map(e=>{let[t,r]=e.split(":").map(e=>e.trim());return{name:t,percentage:r}}):[],Y=e=>e.trim()?e.split("\n").filter(e=>e.trim()):[],K=()=>{d<4&&c(d+1)},$=()=>{switch(d){case 1:if(!S.productName)return a.oR.error("Product name is required"),!1;if(!S.productId)return a.oR.error("Product ID is required"),!1;return!0;case 2:if(!S.batchNumber)return a.oR.error("Batch number is required"),!1;return!0;default:return!0}},Z=async e=>{if(e.preventDefault(),!S.productName||!S.productId||!S.batchNumber)return void a.oR.error("Please fill in all required fields");i(!0);try{let e=new FormData,r={productId:S.productId,name:S.productName,image:S.productImage?S.productImage.name:"No image uploaded",shortDescription:S.shortDescription||"No short description provided",fullDescription:S.fullDescription||"No full description provided",npsApproval:S.npsApprovalFiles.length>0?S.npsApprovalFiles.map(e=>e.name).join(", "):"No documents uploaded",msds:S.msdsFiles.length>0?S.msdsFiles.map(e=>e.name).join(", "):"No documents uploaded",composition:{title:"Composition",ingredients:X(S.ingredients),advantages:Y(S.advantages)},application:{title:"Application Details",instructions:Y(S.applicationInstructions),recommendedCrops:Y(S.recommendedCrops)},safety:{title:"Safety Instructions",ppe:{title:S.ppeTitle,instructions:Y(S.ppeInstructions)},hygiene:{title:S.hygieneTitle,instructions:Y(S.workHygienicPractices)}},certifications:{title:"Certifications",qualityStandards:S.certificationsFiles.length>0?S.certificationsFiles.map(e=>e.name).join(", "):"No documents uploaded"},contact:{title:"Contact Details",address:S.contactAddress||"No address provided",phones:S.contactPhones?S.contactPhones.split(",").map(e=>e.trim()).filter(e=>e):[],email:S.contactEmail||"No email provided",website:S.contactWebsite||"No website provided"}};if(e.append("productData",JSON.stringify(r)),S.productImage&&e.append("image",S.productImage),S.npsApprovalFiles.forEach(t=>e.append("npsApprovalFiles[]",t)),S.msdsFiles.forEach(t=>e.append("msdsFiles[]",t)),S.certificationsFiles.forEach(t=>e.append("certificationsFiles[]",t)),(await h.A.post("".concat(p,"/api/products"),e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data.success){let e={productId:S.productId,number:S.batchNumber,manufacturingDate:S.manufacturingDate||"",expiryDate:S.expiryDate||""};(await h.A.post("".concat(p,"/api/batches"),e,{withCredentials:!0})).data.success?(a.oR.success('Product "'.concat(S.productName,'" created successfully! \uD83C\uDF89')),A(),t&&t()):a.oR.error("Product created but failed to create batch")}}catch(t){var r,s;console.error("Create product error:",t);let e=(null==(s=t.response)||null==(r=s.data)?void 0:r.message)||"Failed to create product";a.oR.error(e)}finally{i(!1)}},ee=e=>{let{title:t,fieldName:r,files:n,fileRef:o,description:a,Icon:i}=e;return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(i,{})}),t]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-gray-400 transition-all duration-200 bg-gray-50/50",children:n.length>0?(0,s.jsx)("div",{className:"space-y-3",children:n.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800 truncate block",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>J(r,t),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center justify-center transition-colors ml-3",disabled:l,children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("label",{htmlFor:"".concat(r,"-upload"),className:"cursor-pointer",children:[(0,s.jsxs)("span",{className:"text-lg font-medium text-gray-800 block mb-1",children:["Click to upload ",t.toLowerCase()]}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:a})]}),(0,s.jsx)("input",{id:"".concat(r,"-upload"),ref:o,type:"file",accept:".pdf,.doc,.docx",multiple:!0,onChange:e=>Q(e,r),className:"hidden",disabled:l})]})})]})},et=()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),er=()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})});return r?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:A,className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-2 overflow-y-auto",children:(0,s.jsxs)("div",{className:"   bg-white    rounded-2xl    shadow-2xl    border border-gray-200    w-full    max-w-[95vw]    sm:max-w-2xl    md:max-w-3xl    lg:max-w-4xl    xl:max-w-5xl   max-h-[95vh]    overflow-hidden   mx-auto   my-4   ",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-600 via-emerald-600 to-green-700 px-4 sm:px-6 lg:px-8 py-4 sm:py-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 bg-white/20 rounded-xl lg:rounded-2xl flex items-center justify-center text-white backdrop-blur-sm",children:(0,s.jsx)(e=>{let{step:t}=e,r={1:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),2:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),3:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),4:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})};return r[t]||r[1]},{step:d})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Add New Product"}),(0,s.jsx)("p",{className:"text-green-100 font-medium text-sm sm:text-base",children:(e=>{switch(e){case 1:default:return"Basic Information";case 2:return"Composition & Batch";case 3:return"Application & Safety";case 4:return"Documents & Contact"}})(d)})]})]}),(0,s.jsx)("button",{onClick:A,className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200 backdrop-blur-sm",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-3 sm:py-4 bg-gray-50 border-b border-gray-200",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"\n                                        w-8 h-8 sm:w-10 sm:h-10 \n                                        rounded-full \n                                        flex items-center justify-center \n                                        font-bold text-sm \n                                        transition-all duration-300 \n                                        ".concat(e<=d?"bg-green-600 text-white shadow-lg":"bg-gray-200 text-gray-500","\n                                    "),children:e}),e<4&&(0,s.jsx)("div",{className:"\n                                            h-1 \n                                            w-6 sm:w-12 md:w-16 lg:w-20 xl:w-24 \n                                            mx-1 sm:mx-2 \n                                            transition-all duration-300 \n                                            ".concat(e<d?"bg-green-600":"bg-gray-200","\n                                        ")})]},e))})}),(0,s.jsx)("div",{className:"   px-4 sm:px-6 lg:px-8    py-4 sm:py-6    max-h-[50vh] sm:max-h-[55vh] lg:max-h-[60vh]   overflow-y-auto   ",children:(0,s.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[1===d&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Product Image"]}),(0,s.jsx)("div",{className:"\n                                                relative border-2 border-dashed rounded-xl \n                                                p-4 sm:p-6 lg:p-8 \n                                                transition-all duration-300 \n                                                bg-gray-50/50\n                                                ".concat(j?"border-green-500 bg-green-50":"border-gray-300 hover:border-green-400 hover:bg-green-50/30","\n                                            "),onDragEnter:G,onDragLeave:G,onDragOver:G,onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&_(e.dataTransfer.files[0])},children:S.productImage?(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:f,alt:"Product Preview",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-xl shadow-lg border-2 border-green-300"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-lg font-medium text-gray-800 block",children:S.productImage.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[(S.productImage.size/1024/1024).toFixed(2)," MB"]})]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{R(e=>({...e,productImage:null})),u.current&&(u.current.value=""),v(null)},className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center transition-colors shadow-lg",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsxs)("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[(0,s.jsx)("span",{className:"text-xl font-semibold text-gray-800 block mb-2",children:"Drop your image here or click to browse"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),(0,s.jsx)("input",{id:"image-upload",ref:u,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:e=>{let t=e.target.files[0];t&&_(t)},className:"hidden",disabled:l})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),"Product Name *"]}),(0,s.jsx)("input",{type:"text",name:"productName",value:S.productName,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Enter product name (e.g., K plus)",required:!0,disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"Product ID *"]}),(0,s.jsx)("input",{type:"text",name:"productId",value:S.productId,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",placeholder:"Enter unique identifier (e.g., k-plus)",required:!0,disabled:l}),(0,s.jsx)("small",{className:"text-gray-500 mt-2 text-sm block",children:"Auto-generated from product name"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})}),"Short Description"]}),(0,s.jsx)("textarea",{name:"shortDescription",value:S.shortDescription,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none text-base",rows:"2",placeholder:"Enter brief product description",disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Full Description"]}),(0,s.jsx)("textarea",{name:"fullDescription",value:S.fullDescription,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none text-base",rows:"4",placeholder:"Enter detailed description",disabled:l})]})]}),2===d&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-4 sm:p-6 border-2 border-purple-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-purple-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(er,{})}),"Product Composition"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Ingredients"}),k.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>z(t,e.target.value,C,k),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",placeholder:"Ingredient ".concat(t+1,": Name:Percentage (e.g., Nitrogen:6%)"),disabled:l}),k.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>U(t,C,k),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>O(C),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Ingredient"]}),(0,s.jsx)("small",{className:"text-gray-600 mt-1 text-sm block",children:"Format: Name:Percentage"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Advantages"}),L.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>z(t,e.target.value,M,L),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",placeholder:"Advantage ".concat(t+1,": Enter advantage"),disabled:l}),L.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>U(t,M,L),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>O(M),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Advantage"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-cyan-100 rounded-xl p-4 sm:p-6 border-2 border-blue-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),"Initial Batch Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Batch Number *"}),(0,s.jsx)("input",{type:"text",name:"batchNumber",value:S.batchNumber,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"FET/FP/000049",required:!0,disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Manufacturing Date"}),(0,s.jsx)("input",{type:"date",name:"manufacturingDate",value:S.manufacturingDate,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Expiry Date"}),(0,s.jsx)("input",{type:"date",name:"expiryDate",value:S.expiryDate,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",disabled:l})]})]})]})]}),3===d&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-100 rounded-xl p-4 sm:p-6 border-2 border-orange-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-orange-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-600 to-yellow-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),"Application Details"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Application Instructions"}),y.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>z(t,e.target.value,N,y),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",placeholder:"Step ".concat(t+1,": Enter instruction"),disabled:l}),y.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>U(t,N,y),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>O(N),className:"mt-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Step"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Recommended Crops"}),D.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>z(t,e.target.value,B,D),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",placeholder:"Crop ".concat(t+1,": Enter crop name"),disabled:l}),D.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>U(t,B,D),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>O(B),className:"mt-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Crop"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-red-100 to-pink-100 rounded-xl p-4 sm:p-6 border-2 border-red-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-red-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-red-600 to-pink-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),"Safety Instructions"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Personal Protective Equipment (PPE)"}),P.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 mb-4",children:[(0,s.jsx)("textarea",{value:e,onChange:e=>T(t,e.target.value,I,P),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 resize-none",rows:"4",placeholder:"PPE Instructions ".concat(t+1,":\n- Wear safety goggles when handling product\n- Use protective gloves at all times  \n- Ensure proper ventilation in work area\n(One instruction per line)"),disabled:l}),P.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,I,P),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200 mt-2",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(I),className:"mt-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add PPE Instructions"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Work Hygienic Practices"}),W.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 mb-4",children:[(0,s.jsx)("textarea",{value:e,onChange:e=>T(t,e.target.value,F,W),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 resize-none",rows:"4",placeholder:"Hygiene Instructions ".concat(t+1,":\n- Wash hands thoroughly before and after use\n- Clean all equipment after use\n- Store in clean, dry environment\n(One instruction per line)"),disabled:l}),W.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,F,W),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200 mt-2",disabled:l,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(F),className:"mt-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:l,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Hygiene Instructions"]})]})]})]})]}),4===d&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-100 to-blue-100 rounded-xl p-4 sm:p-6 border-2 border-indigo-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-600 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(et,{})}),"Required Documents"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(ee,{title:"NPS Approval",fieldName:"npsApprovalFiles",files:S.npsApprovalFiles,fileRef:x,description:"PDF, DOC, DOCX up to 5MB each",Icon:et}),(0,s.jsx)(ee,{title:"MSDS Documents",fieldName:"msdsFiles",files:S.msdsFiles,fileRef:g,description:"Material Safety Data Sheet files",Icon:er}),(0,s.jsx)(ee,{title:"Quality Certifications",fieldName:"certificationsFiles",files:S.certificationsFiles,fileRef:b,description:"Quality standard files",Icon:()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-teal-100 to-green-100 rounded-xl p-4 sm:p-6 border-2 border-teal-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-teal-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-teal-600 to-green-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),"Contact Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Address"]}),(0,s.jsx)("input",{type:"text",name:"contactAddress",value:S.contactAddress,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"123 Main Street, City",disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Phone Numbers"]}),(0,s.jsx)("input",{type:"text",name:"contactPhones",value:S.contactPhones,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"+1234567890, +0987654321",disabled:l}),(0,s.jsx)("small",{className:"text-gray-600 mt-1 text-sm block",children:"Comma-separated values"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),(0,s.jsx)("input",{type:"email",name:"contactEmail",value:S.contactEmail,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"contact@example.com",disabled:l})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})}),"Website"]}),(0,s.jsx)("input",{type:"url",name:"contactWebsite",value:S.contactWebsite,onChange:H,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"https://www.example.com",disabled:l})]})]})]})]})]})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center order-2 sm:order-1",children:d>1&&(0,s.jsxs)("button",{type:"button",onClick:()=>{d>1&&c(d-1)},disabled:l,className:"   px-4 sm:px-6 py-3    bg-gray-200 hover:bg-gray-300    text-gray-800    rounded-xl font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base",children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 font-medium order-1 sm:order-2 sm:text-base",children:["Step ",d," of 4"]}),(0,s.jsx)("div",{className:"flex items-center order-3",children:d<4?(0,s.jsxs)("button",{type:"button",onClick:()=>{$()&&K()},disabled:l,className:"   px-4 sm:px-6 py-3    bg-green-600 hover:bg-green-700    text-white    rounded-xl font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base",children:["Next",(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,s.jsx)("button",{type:"submit",onClick:Z,disabled:!S.productName||!S.productId||!S.batchNumber||l,className:"   px-6 sm:px-8 py-3    bg-green-600 hover:bg-green-700    text-white rounded-xl    font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base",children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white"}),"Creating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Product"]})})})]})})]})})]}):null};var b=r(8637),f=r.n(b);let v=e=>{let{isOpen:t,onClose:r,product:o,onSuccess:l}=e,[d,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(1),[x,h]=(0,n.useState)(null),[p,g]=(0,n.useState)(!1),[b,v]=(0,n.useState)([""]),[j,w]=(0,n.useState)([""]),[y,N]=(0,n.useState)([""]),[k,C]=(0,n.useState)([""]),[L,M]=(0,n.useState)([""]),[D,B]=(0,n.useState)([""]),P=(0,n.useRef)(null),I=(0,n.useRef)(null),W=(0,n.useRef)(null),F=(0,n.useRef)(null),[S,R]=(0,n.useState)({productName:"",shortDescription:"",fullDescription:"",productImage:null,currentImageUrl:null,npsApprovalFiles:[],msdsFiles:[],certificationsFiles:[],ingredients:"",advantages:"",applicationInstructions:"",recommendedCrops:"",ppeInstructions:"",ppeTitle:"Personal Protective Equipment",workHygienicPractices:"",hygieneTitle:"Work Hygienic Practices",contactAddress:"",contactPhones:"",contactEmail:"",contactWebsite:""}),E="dbh79giqj";E||console.error("NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME is not defined"),(0,n.useEffect)(()=>{R(e=>({...e,ingredients:j.filter(e=>e.trim()).join("\n"),advantages:y.filter(e=>e.trim()).join("\n"),recommendedCrops:k.filter(e=>e.trim()).join("\n"),applicationInstructions:b.filter(e=>e.trim()).join("\n"),ppeInstructions:L.filter(e=>e.trim()).join("\n"),ppeTitle:"Personal Protective Equipment",workHygienicPractices:D.filter(e=>e.trim()).join("\n"),hygieneTitle:"Work Hygienic Practices"}))},[j,y,k,b,L,D]),(0,n.useEffect)(()=>{if(t&&o){var e,r,s,n,l,i,d,c,u,x;console.log("\uD83D\uDD04 Initializing product data:",o);let t=(null==(r=o.composition)||null==(e=r.ingredients)?void 0:e.map(e=>"".concat(e.name,":").concat(e.percentage)))||[""],p=(null==(s=o.composition)?void 0:s.advantages)||[""],g=(null==(n=o.application)?void 0:n.recommendedCrops)||[""],b=(null==(l=o.application)?void 0:l.instructions)||[""];console.log("\uD83D\uDCCB Application instructions from product:",null==(i=o.application)?void 0:i.instructions),console.log("\uD83D\uDCCB Setting application steps to:",b);let f=(null==(c=o.safety)||null==(d=c.ppe)?void 0:d.instructions)||[""],j=(null==(x=o.safety)||null==(u=x.hygiene)?void 0:u.instructions)||[""];w(t.length>0?t:[""]),N(p.length>0?p:[""]),C(g.length>0?g:[""]),v(b.length>0?b:[""]),console.log("✅ Application steps set to state:",b),M(f.length>0?f:[""]),B(j.length>0?j:[""]),R({productName:o.name||"",shortDescription:o.shortDescription||"",fullDescription:o.fullDescription||"",productImage:null,currentImageUrl:(e=>{if(!e)return null;let t=e.split(",")[0].trim();if(!E)return a.oR.error("Cloudinary configuration missing"),t;if(t.startsWith("https://res.cloudinary.com/"))return t;if(t.includes("/")&&!t.startsWith("http"))return"https://res.cloudinary.com/".concat(E,"/image/upload/").concat(t);let r=t.replace(/\.[^/.]+$/,"");return"https://res.cloudinary.com/".concat(E,"/image/upload/products/").concat(r)})(o.imagePath),npsApprovalFiles:[],msdsFiles:[],certificationsFiles:[],ingredients:"",advantages:"",applicationInstructions:"",recommendedCrops:"",ppeInstructions:"",ppeTitle:"Personal Protective Equipment",workHygienicPractices:"",hygieneTitle:"Work Hygienic Practices",contactAddress:"Gonagodalla road, Pelwatte, Buttala.",contactPhones:"+94 557284040",contactEmail:"info@farmersfert.com",contactWebsite:"www.farmersfert.com"}),h(null),m(1),console.log("\uD83D\uDD0D Final initialized arrays:",{ingredients:t,advantages:p,recommendedCrops:g,applicationSteps:b,ppeInstructions:f,hygienePractices:j})}},[t,o,E]),(0,n.useEffect)(()=>{if(S.productImage){let e=new FileReader;e.onloadend=()=>h(e.result),e.readAsDataURL(S.productImage)}else h(null)},[S.productImage]);let A=()=>{R({productName:"",shortDescription:"",fullDescription:"",productImage:null,currentImageUrl:null,npsApprovalFiles:[],msdsFiles:[],certificationsFiles:[],ingredients:"",advantages:"",applicationInstructions:"",recommendedCrops:"",ppeInstructions:"",ppeTitle:"Personal Protective Equipment",workHygienicPractices:"",hygieneTitle:"Work Hygienic Practices",contactAddress:"",contactPhones:"",contactEmail:"",contactWebsite:""}),v([""]),w([""]),N([""]),C([""]),M([""]),B([""]),h(null),m(1),P.current&&(P.current.value=""),I.current&&(I.current.value=""),W.current&&(W.current.value=""),F.current&&(F.current.value="")},H=()=>{d||(r(),A())},z=e=>{let{name:t,value:r}=e.target;R(e=>({...e,[t]:r}))},T=(e,t,r,s)=>{let n=[...s];n[e]=t,r(n)},O=(e,t,r,s)=>{let n=[...s];n[e]=t,r(n)},V=e=>{e(e=>[...e,""])},U=e=>{e(e=>[...e,""])},q=(e,t,r)=>{t(r.filter((t,r)=>r!==e))},G=(e,t,r)=>{let s=r.filter((t,r)=>r!==e);t(0===s.length?[""]:s)},_=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?g(!0):"dragleave"===e.type&&g(!1)},Q=e=>["image/png","image/jpeg","image/jpg"].includes(e.type)?e.size>5242880?void a.oR.error("Image size must be less than 5MB"):void R(t=>({...t,productImage:e})):void a.oR.error("Only PNG, JPG, or JPEG images are allowed"),J=e=>{let t=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];return e.filter(e=>t.includes(e.type)?!(e.size>5242880)||(a.oR.error("".concat(e.name,": File size must be less than 5MB")),!1):(a.oR.error("".concat(e.name,": Only PDF, DOC, or DOCX files are allowed")),!1))},X=(e,t)=>{let r=Array.from(e.target.files);if(r.length>0){let e=J(r);R(r=>({...r,[t]:e}))}},Y=(e,t)=>{R(r=>({...r,[e]:r[e].filter((e,r)=>r!==t)}))},K=e=>e.trim()?e.split("\n").filter(e=>e.trim()&&e.includes(":")).map(e=>{let[t,r]=e.split(":").map(e=>e.trim());return{name:t,percentage:r}}):[],$=e=>e.trim()?e.split("\n").filter(e=>e.trim()):[],Z=()=>{u<4&&m(u+1)},ee=()=>{switch(u){case 1:if(!S.productName)return a.oR.error("Product name is required"),!1;return!0;case 2:if(j.filter(e=>e.trim()&&!e.includes(":")).length>0)return a.oR.error('Invalid ingredients format. Use "Name:Percentage" format.'),!1;return!0;case 3:default:return!0;case 4:if(S.contactEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S.contactEmail))return a.oR.error("Please provide a valid email address."),!1;return!0}},et=async e=>{if(e.preventDefault(),!S.productName)return void a.oR.error("Product name is required");if(!o)return void a.oR.error("No product selected for update");c(!0);try{let e=new FormData,t={name:S.productName,shortDescription:S.shortDescription||"No short description provided",fullDescription:S.fullDescription||"No full description provided",composition:{title:"Composition",ingredients:K(S.ingredients),advantages:$(S.advantages)},application:{title:"Application Details",instructions:$(S.applicationInstructions),recommendedCrops:$(S.recommendedCrops)},safety:{title:"Safety Instructions",ppe:{title:S.ppeTitle,instructions:$(S.ppeInstructions)},hygiene:{title:S.hygieneTitle,instructions:$(S.workHygienicPractices)}},contact:{title:"Contact Details",address:S.contactAddress||"No address provided",phones:S.contactPhones?S.contactPhones.split(",").map(e=>e.trim()).filter(e=>e):[],email:S.contactEmail||"No email provided",website:S.contactWebsite||"No website provided"}};e.append("productData",JSON.stringify(t)),S.productImage&&e.append("image",S.productImage),S.npsApprovalFiles.forEach(t=>e.append("npsApprovalFiles[]",t)),S.msdsFiles.forEach(t=>e.append("msdsFiles[]",t)),S.certificationsFiles.forEach(t=>e.append("certificationsFiles[]",t)),(await i.FH.updateProduct(o.productId,e)).data.success&&(a.oR.success('Product "'.concat(S.productName,'" updated successfully! \uD83C\uDF89')),H(),l&&l())}catch(s){var t,r;console.error("Update product error:",s);let e=(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||"Failed to update product";a.oR.error(e)}finally{c(!1)}},er=()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),es=()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),en=e=>{var t;let{title:r,fieldName:n,files:a,fileRef:l,description:i,Icon:c}=e;return(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",htmlFor:"".concat(n,"-update-upload"),children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(c,{})}),r]}),o&&(0,s.jsxs)("div",{className:"mb-4",children:["npsApprovalFiles"===n&&o.npsApproval&&"No documents uploaded"!==o.npsApproval&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:["Current: ",o.npsApproval]})]})}),"msdsFiles"===n&&o.msds&&"No documents uploaded"!==o.msds&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-green-800",children:["Current: ",o.msds]})]})}),"certificationsFiles"===n&&(null==(t=o.certifications)?void 0:t.qualityStandards)&&"No documents uploaded"!==o.certifications.qualityStandards&&(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 mb-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),(0,s.jsxs)("span",{className:"text-sm font-medium text-purple-800",children:["Current: ",o.certifications.qualityStandards]})]})})]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-gray-400 transition-all duration-200 bg-gray-50/50",children:a.length>0?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-green-700 mb-2",children:"\uD83D\uDCC1 New files to upload:"}),a.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border border-green-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800 truncate block",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB"]}),(0,s.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"New Upload"})]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>Y(n,t),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-lg flex items-center justify-center transition-colors ml-3",disabled:d,"aria-label":"Remove ".concat(e.name),children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("label",{htmlFor:"".concat(n,"-update-upload"),className:"cursor-pointer",children:[(0,s.jsx)("span",{className:"text-lg font-medium text-gray-800 block mb-1",children:0===a.length&&o?"Upload new documents to replace current ones":"Click to upload ".concat(r.toLowerCase())}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:i})]}),(0,s.jsx)("input",{id:"".concat(n,"-update-upload"),ref:l,type:"file",accept:".pdf,.doc,.docx",multiple:!0,onChange:e=>X(e,n),className:"hidden",disabled:d})]})})]})};return(en.propTypes={title:f().string.isRequired,fieldName:f().string.isRequired,files:f().array.isRequired,fileRef:f().object.isRequired,description:f().string.isRequired,Icon:f().func.isRequired},t&&o)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:H,className:"fixed inset-0 bg-black/50 backdrop-blur-sm","aria-label":"Close modal"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-2 overflow-y-auto",children:(0,s.jsxs)("div",{className:"   bg-white    rounded-2xl    shadow-2xl    border border-gray-200    w-full    max-w-[95vw]    sm:max-w-2xl    md:max-w-3xl    lg:max-w-4xl    xl:max-w-5xl   min-h-[50vh]   max-h-[95vh]    overflow-hidden   mx-auto   my-4   ",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 px-4 sm:px-6 lg:px-8 py-4 sm:py-6 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 lg:w-16 lg:h-16 bg-white/20 rounded-xl lg:rounded-2xl flex items-center justify-center text-white backdrop-blur-sm",children:(0,s.jsx)(e=>{let{step:t}=e,r={1:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),2:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),3:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),4:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})};return r[t]||r[1]},{step:u})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Update Product"}),(0,s.jsx)("p",{className:"text-blue-100 font-medium text-sm sm:text-base",children:(e=>{switch(e){case 1:default:return"Basic Information";case 2:return"Composition & Details";case 3:return"Application & Safety";case 4:return"Documents & Contact"}})(u)}),(0,s.jsx)("p",{className:"text-blue-200 text-xs sm:text-sm",children:o.name})]})]}),(0,s.jsx)("button",{onClick:H,className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200 backdrop-blur-sm",disabled:d,"aria-label":"Close modal",children:(0,s.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-3 sm:py-4 bg-gray-50 border-b border-gray-200",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"\n                                        w-8 h-8 sm:w-10 sm:h-10 \n                                        rounded-full \n                                        flex items-center justify-center \n                                        font-bold text-sm \n                                        transition-all duration-300 \n                                        ".concat(e<=u?"bg-blue-600 text-white shadow-lg":"bg-gray-200 text-gray-500","\n                                    "),children:e}),e<4&&(0,s.jsx)("div",{className:"\n                                            h-1 \n                                            w-6 sm:w-12 md:w-16 lg:w-20 xl:w-24 \n                                            mx-1 sm:mx-2 \n                                            transition-all duration-300 \n                                            ".concat(e<u?"bg-blue-600":"bg-gray-200","\n                                        ")})]},e))})}),(0,s.jsx)("div",{className:"   px-4 sm:px-6 lg:px-8    py-4 sm:py-6    max-h-[50vh] sm:max-h-[55vh] lg:max-h-[60vh]   overflow-y-auto   ",children:(0,s.jsxs)("form",{onSubmit:et,className:"space-y-6",noValidate:!0,children:[1===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-4 flex items-center gap-3",htmlFor:"update-image-upload",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Product Image"]}),(0,s.jsx)("div",{className:"\n            relative border-2 border-dashed rounded-xl \n            p-4 sm:p-6 lg:p-8 \n            transition-all duration-300 \n            bg-gray-50/50\n            ".concat(p?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50/30","\n        "),onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:e=>{e.preventDefault(),e.stopPropagation(),g(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&Q(e.dataTransfer.files[0])},children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[S.currentImageUrl&&(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Image:"}),(0,s.jsx)("img",{src:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.includes("cloudinary.com"))return e;let{width:r=400,height:s=400,quality:n="auto",format:o="auto"}=t,a="w_".concat(r,",h_").concat(s,",c_fill,q_").concat(n,",f_").concat(o);return e.replace("/upload/","/upload/".concat(a,"/"))}(S.currentImageUrl),alt:"Current Product Image",className:"w-24 h-24 object-cover rounded-xl shadow-lg border-2 border-blue-300",onError:e=>{a.oR.error("Failed to load current product image"),e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,s.jsx)("div",{className:"hidden w-24 h-24 bg-gray-100 rounded-xl flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Image Error"})]})})]}),S.productImage?(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-green-700 mb-2",children:"New Image Preview:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("img",{src:x,alt:"New Product Preview",className:"w-24 h-24 object-cover rounded-xl shadow-lg border-2 border-green-300"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-800 block",children:S.productImage.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[(S.productImage.size/1024/1024).toFixed(2)," MB"]}),(0,s.jsx)("span",{className:"text-xs text-green-600 font-medium block",children:"New Image Selected"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{R(e=>({...e,productImage:null})),P.current&&(P.current.value=""),h(null)},className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-xl flex items-center justify-center transition-colors shadow-lg",disabled:d,"aria-label":"Remove new image",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}):(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,s.jsxs)("label",{htmlFor:"update-image-upload",className:"cursor-pointer",children:[(0,s.jsx)("span",{className:"text-xl font-semibold text-gray-800 block mb-2",children:S.currentImageUrl?"Upload new image to replace current one":"Drop new image here or click to browse"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),(0,s.jsx)("input",{id:"update-image-upload",ref:P,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:e=>{let t=e.target.files[0];t&&Q(t)},className:"hidden",disabled:d})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",htmlFor:"productName",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),"Product Name *"]}),(0,s.jsx)("input",{type:"text",id:"productName",name:"productName",value:S.productName,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Enter product name",required:!0,disabled:d,"aria-required":"true"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",htmlFor:"shortDescription",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})})}),"Short Description"]}),(0,s.jsx)("input",{type:"text",id:"shortDescription",name:"shortDescription",value:S.shortDescription,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200",placeholder:"Enter short description",disabled:d})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-3",htmlFor:"fullDescription",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),"Full Description"]}),(0,s.jsx)("textarea",{id:"fullDescription",name:"fullDescription",value:S.fullDescription,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none",rows:"4",placeholder:"Enter detailed description",disabled:d})]})]}),2===u&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-4 sm:p-6 border-2 border-purple-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-purple-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(es,{})}),"Product Composition"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Ingredients"}),j.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>T(t,e.target.value,w,j),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",placeholder:"Ingredient ".concat(t+1,": Name:Percentage (e.g., Nitrogen:6%)"),disabled:d}),j.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,w,j),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(w),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Ingredient"]}),(0,s.jsx)("small",{className:"text-gray-600 mt-1 text-sm block",children:"Format: Name:Percentage"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Advantages"}),y.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>T(t,e.target.value,N,y),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",placeholder:"Advantage ".concat(t+1,": Enter advantage"),disabled:d}),y.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,N,y),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(N),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Advantage"]})]})]})]})}),3===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-100 to-yellow-100 rounded-xl p-4 sm:p-6 border-2 border-orange-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-orange-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-600 to-yellow-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),"Application Details"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Application Instructions"}),b.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>T(t,e.target.value,v,b),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",placeholder:"Step ".concat(t+1,": Enter instruction"),disabled:d}),b.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,v,b),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(v),className:"mt-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Step"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Recommended Crops"}),k.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>T(t,e.target.value,C,k),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",placeholder:"Crop ".concat(t+1,": Enter crop name"),disabled:d}),k.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>q(t,C,k),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>V(C),className:"mt-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Crop"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-red-100 to-pink-100 rounded-xl p-4 sm:p-6 border-2 border-red-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-red-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-red-600 to-pink-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),"Safety Instructions"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Personal Protective Equipment (PPE)"}),L.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 mb-4",children:[(0,s.jsx)("textarea",{value:e,onChange:e=>O(t,e.target.value,M,L),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 resize-none",rows:"4",placeholder:"PPE Instructions ".concat(t+1,":\n- Wear safety goggles when handling product\n- Use protective gloves at all times  \n- Ensure proper ventilation in work area\n(One instruction per line)"),disabled:d}),L.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>G(t,M,L),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200 mt-2",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>U(M),className:"mt-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add PPE Instructions"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-lg font-semibold text-gray-800 mb-3",children:"Work Hygienic Practices"}),D.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2 mb-4",children:[(0,s.jsx)("textarea",{value:e,onChange:e=>O(t,e.target.value,B,D),className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 resize-none",rows:"4",placeholder:"Hygiene Instructions ".concat(t+1,":\n- Wash hands thoroughly before and after use\n- Clean all equipment after use\n- Store in clean, dry environment\n(One instruction per line)"),disabled:d}),D.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>G(t,B,D),className:"w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors duration-200 mt-2",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:()=>U(B),className:"mt-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold text-sm sm:text-base transition-all duration-200 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Hygiene Instructions"]})]})]})]})]}),4===u&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-100 to-blue-100 rounded-xl p-4 sm:p-6 border-2 border-indigo-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-600 to-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)(er,{})}),"Document Updates"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(en,{title:"NPS Marketing Approval",fieldName:"npsApprovalFiles",files:S.npsApprovalFiles,fileRef:I,description:"PDF, DOC, DOCX up to 5MB each",Icon:er}),(0,s.jsx)(en,{title:"MSDS Documents",fieldName:"msdsFiles",files:S.msdsFiles,fileRef:W,description:"Material Safety Data Sheet files",Icon:es}),(0,s.jsx)(en,{title:"Quality Certifications",fieldName:"certificationsFiles",files:S.certificationsFiles,fileRef:F,description:"Quality standard certification documents",Icon:()=>(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-teal-100 to-green-100 rounded-xl p-4 sm:p-6 border-2 border-teal-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-teal-800 mb-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-teal-600 to-green-600 rounded-lg flex items-center justify-center text-white",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),"Contact Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",htmlFor:"contactAddress",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Address"]}),(0,s.jsx)("input",{type:"text",id:"contactAddress",name:"contactAddress",value:S.contactAddress,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"Gonagodalla Road, Buttala",disabled:d})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",htmlFor:"contactPhones",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Phone Numbers"]}),(0,s.jsx)("input",{type:"text",id:"contactPhones",name:"contactPhones",value:S.contactPhones,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"+94 557284040, +94 771234567",disabled:d}),(0,s.jsx)("small",{className:"text-gray-500 mt-2 block",children:"Comma-separated values"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",htmlFor:"contactEmail",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),(0,s.jsx)("input",{type:"email",id:"contactEmail",name:"contactEmail",value:S.contactEmail,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"info@farmersfert.com",disabled:d})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2",htmlFor:"contactWebsite",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9m0 9c-5 0-9-4-9-9s4-9 9-9"})}),"Website"]}),(0,s.jsx)("input",{type:"url",id:"contactWebsite",name:"contactWebsite",value:S.contactWebsite,onChange:z,className:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all duration-200",placeholder:"https://www.farmersfert.com",disabled:d})]})]})]})]})]})}),(0,s.jsx)("div",{className:"px-4 sm:px-6 lg:px-8 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center order-2 sm:order-1",children:u>1&&(0,s.jsxs)("button",{type:"button",onClick:()=>{u>1&&m(u-1)},disabled:d,className:"   px-4 sm:px-6 py-3    bg-gray-200 hover:bg-gray-300    text-gray-800    rounded-xl    font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base   ","aria-label":"Go to previous step",children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]})}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 font-medium order-1 sm:order-2",children:["Step ",u," of 4"]}),(0,s.jsx)("div",{className:"flex items-center order-3",children:u<4?(0,s.jsxs)("button",{type:"button",onClick:()=>{ee()&&Z()},disabled:d,className:"   px-4 sm:px-6 py-3    bg-blue-600 hover:bg-blue-700    text-white    rounded-xl    font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base   ","aria-label":"Go to next step",children:["Next",(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,s.jsx)("button",{type:"submit",onClick:et,disabled:!S.productName||d,className:"   px-6 sm:px-8 py-3    bg-blue-600 hover:bg-blue-700    text-white    rounded-xl    font-semibold    transition-colors duration-200    disabled:opacity-50    flex items-center gap-2   text-sm sm:text-base   ","aria-label":"Update product",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Product"]})})})]})})]})})]}):null};v.propTypes={isOpen:f().bool.isRequired,onClose:f().func.isRequired,product:f().shape({productId:f().string.isRequired,name:f().string,imagePath:f().string,shortDescription:f().string,fullDescription:f().string,composition:f().shape({ingredients:f().arrayOf(f().shape({name:f().string,percentage:f().string})),advantages:f().arrayOf(f().string)}),application:f().shape({instructions:f().string,recommendedCrops:f().arrayOf(f().string)}),safety:f().shape({ppe:f().shape({instructions:f().arrayOf(f().string)}),hygiene:f().shape({instructions:f().arrayOf(f().string)})}),contact:f().shape({address:f().string,phones:f().arrayOf(f().string),email:f().string,website:f().string}),npsApproval:f().string,msds:f().string,certifications:f().shape({qualityStandards:f().string})}).isRequired,onSuccess:f().func};let j=e=>{var t,r,o,l;let{selectedProduct:i,onRefresh:d,modalHandlers:c}=e,[u,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{var e;console.log("ProductTable - selectedProduct:",i),console.log("ProductTable - batches:",null==i?void 0:i.batches),(null==i||null==(e=i.batches)?void 0:e.length)>0&&console.log("ProductTable - first batch sample:",i.batches[0])},[i]),(0,n.useEffect)(()=>{var e;(null==i||null==(e=i.batches)?void 0:e.length)>0&&setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},200)},[null==i||null==(t=i.batches)?void 0:t.length]);let x=e=>{(null==c?void 0:c.onUpdateBatch)&&c.onUpdateBatch(e)},h=e=>{(null==c?void 0:c.onDeleteBatch)&&c.onDeleteBatch(e.batchId)},p=e=>{if(!e||!e.batchId){a.oR.error("Invalid batch information"),console.error("No valid batch data:",e);return}let t="/view/".concat(e.batchId);console.log("Opening view URL:",t),window.open(t,"_blank")},g=e=>{(null==c?void 0:c.onViewQRCode)&&c.onViewQRCode(e,null==i?void 0:i.name)},b=e=>{if(e.isExpired)return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"px-3 py-1.5 text-sm font-semibold bg-red-100 text-red-800 rounded-full border border-red-200",children:"Expired"})]});let t=Math.ceil((new Date(e.expiryDate)-new Date)/864e5);return t<=30?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),(0,s.jsxs)("span",{className:"px-3 py-1.5 text-sm font-semibold bg-orange-100 text-orange-800 rounded-full border border-orange-200",children:["Expires in ",t," days"]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,s.jsx)("span",{className:"px-3 py-1.5 text-sm font-semibold bg-green-100 text-green-800 rounded-full border border-green-200",children:"Active"})]})},f=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return i?(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:"Batch Management"}),(0,s.jsx)("p",{className:"text-blue-100 font-medium",children:i.name}),(0,s.jsxs)("p",{className:"text-blue-200 text-sm",children:["Product ID: ",i.productId]})]}),(0,s.jsx)("div",{className:"bg-white/20 rounded-2xl px-4 py-2 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"text-white text-sm font-medium",children:[(null==(r=i.batches)?void 0:r.length)||0," Batches"]})})]})}),(0,s.jsx)("div",{className:"hidden md:block",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left p-6 font-semibold text-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a1.994 1.994 0 01-1.414.586H7a4 4 0 01-4-4V7a4 4 0 014-4z"})}),"Batch Information"]})}),(0,s.jsx)("th",{className:"text-left p-6 font-semibold text-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Status"]})}),(0,s.jsx)("th",{className:"text-left p-6 font-semibold text-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),"Actions"]})})]})}),(0,s.jsx)("tbody",{children:(null==(o=i.batches)?void 0:o.length)>0?i.batches.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200 ".concat(e.isExpired?"opacity-75":""),children:[(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-200 rounded-xl flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-blue-600 font-bold text-lg",children:["#",t+1]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-bold text-gray-900 text-lg",children:e.number}),(0,s.jsxs)("div",{className:"text-sm text-blue-600 bg-blue-50 px-3 py-1 rounded-full inline-block mt-1 font-medium",children:["ID: ",e.batchId]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Created: ",f(e.createdAt)]})]})]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-2",children:[b(e),e.manufacturingDate&&(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Mfg:"})," ",f(e.manufacturingDate)]}),e.expiryDate&&(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium",children:"Exp:"})," ",f(e.expiryDate)]})]})}),(0,s.jsx)("td",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{className:"group flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:()=>x(e),title:"Update batch information",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Update"]}),(0,s.jsxs)("button",{className:"group flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:()=>h(e),title:"Delete batch",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),(0,s.jsxs)("button",{className:"group flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:()=>p(e),title:"View detailed information",disabled:u||!e.batchId,children:[(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),(0,s.jsxs)("button",{className:"group flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",onClick:()=>g(e),title:"Generate QR Code",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"QR"]})]})})]},e.batchId)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"3",className:"text-center py-16",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Batches Found"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"This product doesn't have any batches yet."}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-4 inline-block",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-700",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:'Click "Add New Batch" to get started'})]})})]})]})})})})]})})}),(0,s.jsx)("div",{className:"block md:hidden",children:(null==(l=i.batches)?void 0:l.length)>0?(0,s.jsx)("div",{className:"p-4 space-y-4",children:i.batches.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gradient-to-r from-white to-blue-50 border-2 border-blue-200 rounded-2xl p-6 shadow-lg ".concat(e.isExpired?"opacity-75":""),children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-100 to-indigo-200 rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,s.jsxs)("span",{className:"text-blue-600 font-bold text-xl",children:["#",t+1]})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-bold text-gray-900 text-lg truncate",children:e.number}),(0,s.jsxs)("div",{className:"text-sm text-blue-600 bg-blue-100 px-3 py-1 rounded-full inline-block mt-1 font-medium",children:["ID: ",e.batchId]}),(0,s.jsx)("div",{className:"mt-2",children:b(e)})]})]}),(e.manufacturingDate||e.expiryDate)&&(0,s.jsx)("div",{className:"bg-white/80 rounded-xl p-4 mb-4 border border-blue-100",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.manufacturingDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 font-medium",children:"Manufacturing:"}),(0,s.jsx)("div",{className:"text-gray-800 font-semibold",children:f(e.manufacturingDate)})]}),e.expiryDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 font-medium",children:"Expiry:"}),(0,s.jsx)("div",{className:"text-gray-800 font-semibold",children:f(e.expiryDate)})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-blue-600 border border-blue-600 rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-lg",onClick:()=>x(e),title:"Update batch information",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Update"]}),(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 border border-red-600 rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-200 shadow-lg",onClick:()=>h(e),title:"Delete batch",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-green-500 to-green-600 border border-green-600 rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-lg",onClick:()=>p(e),title:"View detailed information",disabled:u||!e.batchId,children:[(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium text-white bg-gradient-to-r from-purple-500 to-purple-600 border border-purple-600 rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-lg",onClick:()=>g(e),title:"Generate QR Code",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"QR"]})]})]},e.batchId))}):(0,s.jsx)("div",{className:"p-8 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-bold text-gray-700 mb-2",children:"No Batches Found"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4 text-sm",children:"This product doesn't have any batches yet."}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-3 inline-block",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-blue-700",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-xs font-medium",children:'Click "Add New Batch" to get started'})]})})]})]})})}),u&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:"Processing..."})]})})]}):(console.log("ProductTable - No product selected"),(0,s.jsx)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 p-12 text-center",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"relative mb-8",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-200 rounded-full flex items-center justify-center mx-auto shadow-lg",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})]}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Product Selected"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:"Please select a product from the dropdown above to view its batch information and manage inventory"}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Getting Started:"}),(0,s.jsxs)("ul",{className:"text-blue-700 space-y-1 text-sm",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Use the dropdown above to select a fertilizer product"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"View detailed batch information and tracking data"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Manage stock levels and expiry dates"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Generate QR codes for product identification"]})]})]})]})})]})}))},w=e=>{let{message:t="Loading...",fullScreen:r=!0}=e;return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900 via-indigo-900 to-purple-900 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-white border-t-transparent mx-auto mb-6"}),(0,s.jsx)("div",{className:"absolute top-3 left-3 animate-ping rounded-full h-14 w-14 border-4 border-purple-300 border-t-transparent"})]}),(0,s.jsx)("div",{className:"text-white text-xl font-semibold mb-4",children:t}),(0,s.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-gray-300 border-t-indigo-600 mx-auto mb-2"}),(0,s.jsx)("div",{className:"text-gray-700 text-sm font-medium",children:t})]})})},y=e=>{let{isOpen:t,onClose:r,onConfirm:n,title:o,message:a,confirmText:l="Delete",cancelText:i="Cancel",type:d="danger"}=e;if(!t)return null;let c=(()=>{switch(d){case"danger":return{icon:"⚠️",headerGradient:"from-red-600 to-rose-600",iconBg:"bg-red-100",iconColor:"text-red-600",confirmBg:"bg-red-600 hover:bg-red-700",borderColor:"border-red-200",alertBg:"from-red-50 to-rose-50",alertIcon:"\uD83D\uDEA8",alertText:"text-red-700",alertTitle:"text-red-800"};case"warning":return{icon:"⚡",headerGradient:"from-orange-600 to-amber-600",iconBg:"bg-orange-100",iconColor:"text-orange-600",confirmBg:"bg-orange-600 hover:bg-orange-700",borderColor:"border-orange-200",alertBg:"from-orange-50 to-amber-50",alertIcon:"⚠️",alertText:"text-orange-700",alertTitle:"text-orange-800"};default:return{icon:"ℹ️",headerGradient:"from-blue-600 to-cyan-600",iconBg:"bg-blue-100",iconColor:"text-blue-600",confirmBg:"bg-blue-600 hover:bg-blue-700",borderColor:"border-blue-200",alertBg:"from-blue-50 to-cyan-50",alertIcon:"ℹ️",alertText:"text-blue-700",alertTitle:"text-blue-800"}}})();return(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:r,className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 w-full max-w-[95vw] sm:max-w-md md:max-w-lg max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r ".concat(c.headerGradient," px-6 py-5 relative overflow-hidden"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 ".concat(c.iconBg," rounded-xl flex items-center justify-center text-2xl backdrop-blur-sm ").concat(c.iconColor),children:c.icon}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:o})]}),(0,s.jsx)("button",{onClick:r,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200 backdrop-blur-sm",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r ".concat(c.alertBg," rounded-xl p-4 border-2 ").concat(c.borderColor),children:(0,s.jsx)("p",{className:"text-gray-700 leading-relaxed text-center whitespace-pre-line text-sm",children:a})}),"danger"===d&&(0,s.jsx)("div",{className:"mt-4 bg-gradient-to-r ".concat(c.alertBg," rounded-xl p-4 border-2 ").concat(c.borderColor),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-lg ".concat(c.iconColor),children:c.alertIcon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold ".concat(c.alertTitle," mb-1"),children:"Warning"}),(0,s.jsx)("p",{className:"".concat(c.alertText," text-sm"),children:"This action cannot be undone. Please make sure you want to proceed."})]})]})})]}),(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-colors flex items-center gap-2 text-sm",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),i]}),(0,s.jsxs)("button",{onClick:n,className:"px-4 py-2 ".concat(c.confirmBg," text-white rounded-xl font-medium transition-colors flex items-center gap-2 text-sm"),children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l]})]})})]})})]})},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"qr-code.png";try{let r=document.createElement("a");return r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),!0}catch(e){return console.error("Error downloading QR code:",e),!1}},k=e=>{let{isOpen:t,onClose:o,batch:l,productName:i}=e,[d,c]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&l&&x()},[t,l]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!u&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,u,o]);let x=async()=>{m(!0);try{let e="".concat(window.location.origin,"/view/").concat(l.batchId),t=(await r.e(862).then(r.t.bind(r,6862,19))).default,s=await t.toDataURL(e,{width:256,margin:2,color:{dark:"#000000",light:"#FFFFFF"}});c(s)}catch(e){console.error("QR Code generation error:",e),h()}finally{m(!1)}},h=()=>{let e=document.createElement("canvas"),t=e.getContext("2d");e.width=256,e.height=256,t.fillStyle="#FFFFFF",t.fillRect(0,0,256,256),t.fillStyle="#000000",t.fillRect(0,0,256,20),t.fillRect(0,0,20,256),t.fillRect(236,0,20,256),t.fillRect(0,236,256,20),t.fillStyle="#000000",t.font="12px Arial",t.textAlign="center",t.fillText("QR Code",128,108),t.fillText(l.number,128,128),t.fillText(i,128,148),c(e.toDataURL("image/png"))},p=()=>{u||o()};return t&&l?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:p,className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 w-full max-w-[95vw] sm:max-w-md md:max-w-lg max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center text-2xl text-purple-600 backdrop-blur-sm",children:"\uD83D\uDCF1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"QR Code Generator"}),(0,s.jsxs)("p",{className:"text-purple-200 text-sm",children:["For ",i]})]})]}),(0,s.jsx)("button",{onClick:p,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200",disabled:u,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-4 border-2 border-purple-200 mb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-purple-900",children:i}),(0,s.jsxs)("p",{className:"text-sm text-purple-700",children:["Batch: ",l.number]}),(0,s.jsxs)("p",{className:"text-xs text-purple-600",children:["ID: ",l.batchId]})]})]})}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("div",{className:"inline-block p-4 bg-white border-2 border-gray-200 rounded-xl shadow-md",children:u?(0,s.jsx)("div",{className:"w-48 h-48 bg-gray-100 flex items-center justify-center rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Generating..."})]})}):(0,s.jsx)("img",{src:d,alt:"QR Code",className:"w-48 h-48 rounded-lg"})})}),(0,s.jsx)("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500 text-lg",children:"\uD83D\uDD17"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 mb-1",children:"Product View URL"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 break-all font-mono bg-white p-2 rounded border",children:"".concat(window.location.origin,"/view/").concat(l.batchId)})]})]})}),(0,s.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-blue-500 text-lg",children:"\uD83D\uDCA1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 mb-1",children:"How to Use"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,s.jsx)("li",{children:"• Scan the QR code with a smartphone camera"}),(0,s.jsx)("li",{children:"• Copy the URL to share directly"}),(0,s.jsx)("li",{children:"• Download the QR code for printing"})]})]})]})})]}),(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsxs)("button",{onClick:p,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Close"]}),(0,s.jsxs)("button",{onClick:()=>{let e="".concat(window.location.origin,"/view/").concat(l.batchId);navigator.clipboard.writeText(e).then(()=>{a.oR.success("URL copied to clipboard!")})},className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-medium transition-colors flex items-center gap-2 text-sm",disabled:u,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy URL"]}),(0,s.jsxs)("button",{onClick:()=>{d&&(N(d,"QR_".concat(i,"_").concat(l.number,".png")),a.oR.success("QR code downloaded successfully!"))},disabled:u||!d,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download"]})]})})]})})]}):null},C="https://your-railway-app.railway.app",L=e=>{let{isOpen:t,onClose:r,batch:o,onSuccess:l}=e,[i,d]=(0,n.useState)(!1),[c,u]=(0,n.useState)({number:"",manufacturingDate:"",expiryDate:""});(0,n.useEffect)(()=>{if(t&&o){let e=e=>e?new Date(e).toISOString().split("T")[0]:"";u({number:o.number||"",manufacturingDate:e(o.manufacturingDate),expiryDate:e(o.expiryDate)})}},[t,o]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!i&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,i,r]);let m=()=>{i||r()},x=e=>{let{name:t,value:r}=e.target;u(e=>({...e,[t]:r}))},p=async e=>{if(e.preventDefault(),!C)return void a.oR.error("API URL is not configured. Please contact support.");if(!c.number)return void a.oR.error("Batch number is required");if(!o)return void a.oR.error("No batch selected for update");if(c.manufacturingDate&&c.expiryDate&&new Date(c.manufacturingDate)>=new Date(c.expiryDate))return void a.oR.error("Expiry date must be after manufacturing date");d(!0);try{let e={number:c.number,manufacturingDate:c.manufacturingDate,expiryDate:c.expiryDate};(await h.A.put("".concat(C,"/api/batches/").concat(o.batchId),e,{withCredentials:!0})).data.success&&(a.oR.success('Batch "'.concat(c.number,'" updated successfully! \uD83C\uDF89')),r(),l&&l())}catch(r){var t,s;console.error("Update batch error:",r);let e=(null==(s=r.response)||null==(t=s.data)?void 0:t.message)||"Failed to update batch";a.oR.error(e)}finally{d(!1)}};return t&&o?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:m,className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 w-full max-w-[95vw] sm:max-w-lg md:max-w-xl max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 px-6 py-5 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-2xl backdrop-blur-sm text-blue-600",children:"✏️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Update Batch Information"}),(0,s.jsxs)("p",{className:"text-blue-100 text-sm",children:["Modify batch details for ",o.number]})]})]}),(0,s.jsx)("button",{onClick:m,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200 backdrop-blur-sm",disabled:i,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border-2 border-blue-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-blue-900",children:["Batch: ",o.number]}),(0,s.jsxs)("p",{className:"text-sm text-blue-700",children:["Batch ID: ",o.batchId]}),(0,s.jsxs)("p",{className:"text-xs text-blue-600",children:["Created: ",new Date(o.createdAt).toLocaleDateString()]})]})]}),(0,s.jsx)("div",{className:"bg-blue-100 border border-blue-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-blue-500 text-lg",children:"ℹ️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 mb-1",children:"Update Information"}),(0,s.jsx)("p",{className:"text-blue-700 text-sm",children:"Modify the batch number and dates below. Changes will be saved immediately."})]})]})})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-white rounded-xl p-4 border-2 border-gray-200",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Batch Number *"]}),(0,s.jsx)("input",{type:"text",name:"number",value:c.number,onChange:x,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-sm",placeholder:"e.g., FET/FP/000049",required:!0,disabled:i})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Manufacturing Date"]}),(0,s.jsx)("input",{type:"date",name:"manufacturingDate",value:c.manufacturingDate,onChange:x,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-500/20 focus:border-green-500 transition-all duration-300 text-sm",disabled:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Expiry Date"]}),(0,s.jsx)("input",{type:"date",name:"expiryDate",value:c.expiryDate,onChange:x,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-orange-500/20 focus:border-orange-500 transition-all duration-300 text-sm",disabled:i})]})]})]})})]})}),(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("button",{onClick:m,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",disabled:i,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),(0,s.jsx)("button",{onClick:p,disabled:!c.number||i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2 text-sm",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update Batch"]})})]})})]})})]}):null},M=e=>{let{isOpen:t,onClose:r,selectedProduct:o,onSuccess:l}=e,[d,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)({batchNumber:"",manufacturingDate:"",expiryDate:""}),x=()=>{let e=new Date().toISOString().split("T")[0],t=new Date;t.setFullYear(t.getFullYear()+2),m({batchNumber:"",manufacturingDate:e,expiryDate:t.toISOString().split("T")[0]})};(0,n.useEffect)(()=>{t&&x()},[t]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!d&&(r(),x())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,d]);let h=()=>{d||(r(),x())},p=e=>{let{name:t,value:r}=e.target;m(e=>({...e,[t]:r}))},g=async e=>{if(e.preventDefault(),!u.batchNumber)return void a.oR.error("Please enter batch number");if(!o)return void a.oR.error("No product selected");if(!u.manufacturingDate)return void a.oR.error("Please enter manufacturing date");if(!u.expiryDate)return void a.oR.error("Please enter expiry date");if(new Date(u.manufacturingDate)>=new Date(u.expiryDate))return void a.oR.error("Expiry date must be after manufacturing date");c(!0);try{let e={productId:o.productId,number:u.batchNumber,manufacturingDate:u.manufacturingDate,expiryDate:u.expiryDate};(await i.FH.createBatch(e)).data.success&&(a.oR.success('Batch "'.concat(u.batchNumber,'" added successfully to ').concat(o.name,"! \uD83C\uDF89")),h(),l&&l())}catch(s){var t,r;console.error("Add batch error:",s);let e=(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||"Failed to add batch";a.oR.error(e)}finally{c(!1)}};return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{onClick:h,className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300"}),(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 w-full max-w-[95vw] sm:max-w-lg md:max-w-xl lg:max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 px-6 py-5 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-3xl backdrop-blur-sm",children:"\uD83D\uDCE6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Add New Batch"}),(0,s.jsxs)("p",{className:"text-green-100 text-sm",children:["For ",(null==o?void 0:o.name)||"Selected Product"]})]})]}),(0,s.jsx)("button",{onClick:h,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all duration-200 backdrop-blur-sm",disabled:d,children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,s.jsx)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[o&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border-2 border-green-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-green-900",children:o.name}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:o.shortDescription||"No description available"}),(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Product ID: ",o.productId]})]})]})}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border-2 border-blue-200",children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-blue-800 mb-3 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"ℹ️"}),"Batch Details"]}),(0,s.jsx)("p",{className:"text-blue-700 text-sm mb-4",children:"Enter the details for the new batch"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Batch Number *"]}),(0,s.jsx)("input",{type:"text",name:"batchNumber",value:u.batchNumber,onChange:p,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-500/20 focus:border-green-500 transition-all duration-300",placeholder:"e.g., FET/FP/000049",required:!0,disabled:d})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Manufacturing Date *"]}),(0,s.jsx)("input",{type:"date",name:"manufacturingDate",value:u.manufacturingDate,onChange:p,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-500/20 focus:border-green-500 transition-all duration-300",required:!0,disabled:d})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Expiry Date *"]}),(0,s.jsx)("input",{type:"date",name:"expiryDate",value:u.expiryDate,onChange:p,className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-500/20 focus:border-green-500 transition-all duration-300",required:!0,disabled:d})]})]})]})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl p-4 border-2 border-yellow-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-yellow-500 text-xl",children:"\uD83D\uDCA1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Important Notice"}),(0,s.jsx)("p",{className:"text-yellow-700 text-sm",children:"Ensure all batch information is accurate for tracking and quality control."})]})]})})]})}),(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("button",{onClick:h,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2",disabled:d,children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),(0,s.jsx)("button",{onClick:g,disabled:!u.batchNumber||d,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Add Batch"]})})]})})]})})]}):null},D=()=>{let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0),[h,p]=(0,n.useState)(!1),[b,f]=(0,n.useState)({totalProducts:0,totalBatches:0,expiredBatches:0,expiringSoon:0}),[N,C]=(0,n.useState)({isOpen:!1,product:null}),[D,B]=(0,n.useState)({isOpen:!1,product:null}),[P,I]=(0,n.useState)({isOpen:!1}),[W,F]=(0,n.useState)({isOpen:!1,batch:null,productName:""}),[S,R]=(0,n.useState)({isOpen:!1,batch:null}),[E,A]=(0,n.useState)({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"info",onConfirm:null}),H=(0,o.useRouter)();(0,n.useEffect)(()=>{z()},[]),(0,n.useEffect)(()=>{c||T()},[c]);let z=async()=>{try{if(!(await i.FH.checkAuth()).data.authenticated)return void H.push("/");m(!1)}catch(e){console.error("Authentication check failed:",e),a.oR.error("Authentication failed"),H.push("/")}},T=async()=>{try{p(!0);let r=await i.FH.getProducts();if(r.data.success&&(l(r.data.products),O(r.data.products),e)){let s=r.data.products.find(t=>t.productId===e.productId);s?t(s):(t(null),a.oR.info("Selected product was deleted"))}}catch(e){console.error("Load products error:",e),a.oR.error("Failed to load products")}finally{p(!1)}},O=e=>{let t=e.length,r=0,s=0,n=0,o=new Date;e.forEach(e=>{e.batches&&(r+=e.batches.length,e.batches.forEach(e=>{e.isExpired||e.expiryDate&&new Date(e.expiryDate)<=o?s++:e.expiryDate&&30>=Math.ceil((new Date(e.expiryDate)-o)/864e5)&&n++}))}),f({totalProducts:t,totalBatches:r,expiredBatches:s,expiringSoon:n})},V=e=>{let{title:t,message:r,confirmText:s="Confirm",cancelText:n="Cancel",type:o="info",onConfirm:a}=e;A({isOpen:!0,title:t,message:r,confirmText:s,cancelText:n,type:o,onConfirm:a})},U=async()=>{let{product:e}=D;try{(await i.FH.deleteProduct(e.productId)).data.success&&(a.oR.success("Product deleted successfully!"),t(null),B({isOpen:!1,product:null}),T())}catch(t){var r,s;console.error("Delete product error:",t);let e=(null==(s=t.response)||null==(r=s.data)?void 0:r.message)||"Failed to delete product";a.oR.error(e)}},q=async e=>{V({title:"Delete Batch",message:"Are you sure you want to delete this batch? This action cannot be undone.",confirmText:"Delete",type:"danger",onConfirm:async()=>{try{(await i.FH.deleteBatch(e)).data.success&&(a.oR.success("Batch deleted successfully!"),T())}catch(s){var t,r;console.error("Delete batch error:",s);let e=(null==(r=s.response)||null==(t=r.data)?void 0:t.message)||"Failed to delete batch";a.oR.error(e)}}})};return c?(0,s.jsx)(w,{message:"Loading dashboard..."}):(0,s.jsx)(u,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,s.jsx)(d,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:b.totalProducts})]}),(0,s.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Active products"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Batches"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:b.totalBatches})]}),(0,s.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-sm text-green-600 font-medium",children:"Production batches"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Soon"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:b.expiringSoon})]}),(0,s.jsx)("div",{className:"bg-orange-100 rounded-full p-3",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-sm text-orange-600 font-medium",children:"Next 30 days"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Expired"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-red-600",children:b.expiredBatches})]}),(0,s.jsx)("div",{className:"bg-red-100 rounded-full p-3",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"text-sm text-red-600 font-medium",children:"Requires attention"})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Product Management Dashboard"}),(0,s.jsx)("p",{className:"text-blue-100",children:"Manage your fertilizer products and batch information"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("button",{onClick:T,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-white/20 text-white rounded-xl hover:bg-white/30 disabled:opacity-50 text-sm font-medium transition-all duration-200 backdrop-blur-sm",children:[h?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{children:"Refresh"})]})})]})}),(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(x,{products:r,onProductSelect:e=>{t(e)},onRefresh:T})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,s.jsxs)("button",{className:"group flex items-center justify-center gap-3 p-4 rounded-2xl border-2 transition-all duration-300 min-h-[80px] ".concat(e?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 text-green-700 hover:from-green-100 hover:to-emerald-100 hover:border-green-300 hover:shadow-lg hover:-translate-y-1":"opacity-50 cursor-not-allowed bg-gray-50 border-gray-200 text-gray-500"),onClick:()=>{if(!e)return void a.oR.error("Please select a product first");I({isOpen:!0})},disabled:!e,children:[(0,s.jsx)("div",{className:"rounded-full p-3 ".concat(e?"bg-green-200 group-hover:bg-green-300":"bg-gray-200"," transition-colors"),children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Add New Batch"}),(0,s.jsx)("div",{className:"text-sm opacity-75",children:"Create production batch"})]})]}),(0,s.jsxs)("button",{className:"group flex items-center justify-center gap-3 p-4 rounded-2xl border-2 transition-all duration-300 min-h-[80px] ".concat(e?"bg-gradient-to-r from-blue-50 to-cyan-50 border-blue-200 text-blue-700 hover:from-blue-100 hover:to-cyan-100 hover:border-blue-300 hover:shadow-lg hover:-translate-y-1":"opacity-50 cursor-not-allowed bg-gray-50 border-gray-200 text-gray-500"),onClick:()=>{if(!e)return void a.oR.error("Please select a product first");C({isOpen:!0,product:e})},disabled:!e,children:[(0,s.jsx)("div",{className:"rounded-full p-3 ".concat(e?"bg-blue-200 group-hover:bg-blue-300":"bg-gray-200"," transition-colors"),children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Update Product"}),(0,s.jsx)("div",{className:"text-sm opacity-75",children:"Edit product details"})]})]}),(0,s.jsxs)("button",{className:"group flex items-center justify-center gap-3 p-4 rounded-2xl border-2 transition-all duration-300 min-h-[80px] sm:col-span-2 lg:col-span-1 ".concat(e?"bg-gradient-to-r from-red-50 to-pink-50 border-red-200 text-red-700 hover:from-red-100 hover:to-pink-100 hover:border-red-300 hover:shadow-lg hover:-translate-y-1":"opacity-50 cursor-not-allowed bg-gray-50 border-gray-200 text-gray-500"),onClick:()=>{var t;if(!e)return void a.oR.error("Please select a product first");B({isOpen:!0,product:e,title:"Delete Product",message:'Are you sure you want to delete "'.concat(e.name,'"?\n\nThis will also delete all ').concat((null==(t=e.batches)?void 0:t.length)||0," batches associated with this product.\n\nThis action cannot be undone."),confirmText:"Delete Product",type:"danger"})},disabled:!e,children:[(0,s.jsx)("div",{className:"rounded-full p-3 ".concat(e?"bg-red-200 group-hover:bg-red-300":"bg-gray-200"," transition-colors"),children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Delete Product"}),(0,s.jsx)("div",{className:"text-sm opacity-75",children:"Remove permanently"})]})]})]}),(0,s.jsx)(j,{selectedProduct:e,onRefresh:T,modalHandlers:{onViewQRCode:(t,r)=>{F({isOpen:!0,batch:t,productName:r||(null==e?void 0:e.name)||"Unknown Product"})},onUpdateBatch:e=>{R({isOpen:!0,batch:e})},onDeleteBatch:q,onShowConfirmation:V}})]})]})]}),(0,s.jsx)(g,{onSuccess:T}),(0,s.jsx)(v,{isOpen:N.isOpen,onClose:()=>C({isOpen:!1,product:null}),product:N.product,onSuccess:()=>{C({isOpen:!1,product:null}),T()}}),(0,s.jsx)(M,{isOpen:P.isOpen,onClose:()=>I({isOpen:!1}),selectedProduct:e,onSuccess:()=>{I({isOpen:!1}),T()}}),(0,s.jsx)(k,{isOpen:W.isOpen,onClose:()=>F({isOpen:!1,batch:null,productName:""}),batch:W.batch,productName:W.productName}),(0,s.jsx)(L,{isOpen:S.isOpen,onClose:()=>R({isOpen:!1,batch:null}),batch:S.batch,onSuccess:()=>{R({isOpen:!1,batch:null}),T()}}),(0,s.jsx)(y,{isOpen:D.isOpen,onClose:()=>B({isOpen:!1,product:null}),onConfirm:U,title:D.title,message:D.message,confirmText:D.confirmText,type:D.type}),(0,s.jsx)(y,{isOpen:E.isOpen,onClose:()=>A(e=>({...e,isOpen:!1})),onConfirm:()=>{E.onConfirm&&E.onConfirm(),A(e=>({...e,isOpen:!1}))},title:E.title,message:E.message,confirmText:E.confirmText,cancelText:E.cancelText,type:E.type}),(0,s.jsx)(a.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",className:"mt-16 sm:mt-20"})]})})}},2948:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6403:(e,t,r)=>{"use strict";r.d(t,{FH:()=>i});var s=r(3464);let n="https://your-railway-app.railway.app";console.log("\uD83C\uDF31 Farmers Ferts API URL:",n);let o={signin:"/signin",signout:"/signout",authCheck:"/auth/check",products:"/api/products",productById:e=>"/api/products/".concat(e),batches:"/api/batches",batchById:e=>"/api/batches/".concat(e),productView:e=>"/api/product-view/".concat(e),analytics:"/api/analytics/dashboard",storageInfo:"/api/storage-info",health:"/health"},a=s.A.create({baseURL:n,timeout:6e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});a.interceptors.request.use(e=>{var t;console.log("\uD83C\uDF31 API Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),endpoint:e.url,fullURL:"".concat(e.baseURL).concat(e.url),origin:window.location.origin});{let t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>(console.error("❌ Request Error:",e),Promise.reject(e))),a.interceptors.response.use(e=>{var t;return console.log("✅ API Success:",{status:e.status,endpoint:e.config.url,success:null==(t=e.data)?void 0:t.success}),e},e=>{var t,r,s,o;return(console.error("❌ API Error:",{message:e.message,code:e.code,status:null==(t=e.response)?void 0:t.status,endpoint:null==(r=e.config)?void 0:r.url,data:null==(s=e.response)?void 0:s.data}),"ERR_NETWORK"!==e.code&&e.response)?"ERR_BLOCKED_BY_CLIENT"===e.code||e.message.includes("CORS")?(console.error("\uD83D\uDD34 CORS ERROR - Backend not allowing frontend origin"),Promise.reject({...e,message:"CORS error. Please check server configuration."})):((null==(o=e.response)?void 0:o.status)===401&&(console.warn("\uD83D\uDD10 Authentication failed, clearing tokens"),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),window.location.pathname.includes("/")&&"/dashboard"!==window.location.pathname||(window.location.href="/")),Promise.reject(e)):(console.error("\uD83D\uDD34 NETWORK ERROR - Check if backend is running on",n),Promise.reject({...e,message:"Network error. Please check if the server is running."}))});let l=async()=>{try{console.log("\uD83E\uDDEA Testing API connection...");let e=await fetch("".concat(n,"/health"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return console.error("❌ API Connection failed:",e.status,e.statusText),{success:!1,error:"HTTP ".concat(e.status)};{let t=await e.json();return console.log("✅ API Connection successful:",t),{success:!0,data:t}}}catch(e){return console.error("❌ API Connection test failed:",e),{success:!1,error:e.message}}},i={testConnection:l,async signin(e){try{console.log("\uD83D\uDD10 Attempting login...");let t=await a.post(o.signin,e);return console.log("✅ Login successful"),t}catch(e){var t,r;throw console.error("\uD83D\uDD10 Login failed:",(null==(r=e.response)||null==(t=r.data)?void 0:t.message)||e.message),e}},async signout(){try{console.log("\uD83D\uDD10 Signing out...");let e=await a.post(o.signout);return localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),console.log("✅ Signout successful"),e}catch(e){throw console.error("\uD83D\uDD10 Signout failed:",e),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),e}},async checkAuth(){try{return await a.get(o.authCheck)}catch(e){throw console.error("\uD83D\uDD10 Auth check failed:",e),e}},async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;console.log("\uD83D\uDCE6 Fetching products...");let r=await a.get(o.products,{params:e});return console.log("✅ Fetched ".concat((null==(t=r.data.products)?void 0:t.length)||0," products")),r}catch(e){throw console.error("\uD83D\uDCE6 Failed to fetch products:",e),e}},async createProduct(e){try{console.log("\uD83D\uDCE6 Creating product...");let t=await a.post(o.products,e,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4});return console.log("✅ Product created successfully"),t}catch(e){throw console.error("\uD83D\uDCE6 Failed to create product:",e),e}},async updateProduct(e,t){try{console.log("\uD83D\uDCE6 Updating product:",e);let r=await a.put(o.productById(e),t,{headers:t instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"},timeout:12e4});return console.log("✅ Product updated successfully"),r}catch(e){throw console.error("\uD83D\uDCE6 Failed to update product:",e),e}},async deleteProduct(e){try{console.log("\uD83D\uDCE6 Deleting product:",e);let t=await a.delete(o.productById(e));return console.log("✅ Product deleted successfully"),t}catch(e){throw console.error("\uD83D\uDCE6 Failed to delete product:",e),e}},async getBatches(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;console.log("\uD83C\uDFF7️ Fetching batches...");let r=await a.get(o.batches,{params:e});return console.log("✅ Fetched ".concat((null==(t=r.data.batches)?void 0:t.length)||0," batches")),r}catch(e){throw console.error("\uD83C\uDFF7️ Failed to fetch batches:",e),e}},async createBatch(e){try{console.log("\uD83C\uDFF7️ Creating batch...");let t=await a.post(o.batches,e);return console.log("✅ Batch created successfully"),t}catch(e){throw console.error("\uD83C\uDFF7️ Failed to create batch:",e),e}},async updateBatch(e,t){try{console.log("\uD83C\uDFF7️ Updating batch:",e);let r=await a.put(o.batchById(e),t);return console.log("✅ Batch updated successfully"),r}catch(e){throw console.error("\uD83C\uDFF7️ Failed to update batch:",e),e}},async deleteBatch(e){try{console.log("\uD83C\uDFF7️ Deleting batch:",e);let t=await a.delete(o.batchById(e));return console.log("✅ Batch deleted successfully"),t}catch(e){throw console.error("\uD83C\uDFF7️ Failed to delete batch:",e),e}},async getProductView(e){try{console.log("\uD83D\uDC41️ Fetching product view for batch:",e);let t=await a.get(o.productView(e));return console.log("✅ Product view fetched successfully"),t}catch(e){throw console.error("\uD83D\uDC41️ Failed to fetch product view:",e),e}},async getAnalytics(){try{console.log("\uD83D\uDCCA Fetching analytics...");let e=await a.get(o.analytics);return console.log("✅ Analytics fetched successfully"),e}catch(e){throw console.error("\uD83D\uDCCA Failed to fetch analytics:",e),e}},async getStorageInfo(){try{return await a.get(o.storageInfo)}catch(e){throw console.error("\uD83D\uDCBE Failed to get storage info:",e),e}},async getHealth(){try{return await a.get(o.health)}catch(e){throw console.error("\uD83C\uDFE5 Health check failed:",e),e}}};setTimeout(()=>{l().then(e=>{e.success||console.warn("⚠️ Initial API connection test failed. Please ensure backend is running.")})},1e3)},7690:(e,t,r)=>{Promise.resolve().then(r.bind(r,1716))},8637:(e,t,r)=>{e.exports=r(9399)()},9399:(e,t,r)=>{"use strict";var s=r(2948);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,a){if(a!==s){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r,r}}},e=>{var t=t=>e(e.s=t);e.O(0,[797,794,766,546,441,684,358],()=>t(7690)),_N_E=e.O()}]);