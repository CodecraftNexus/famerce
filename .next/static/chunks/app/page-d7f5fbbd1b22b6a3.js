(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2928:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var s=o(5155),r=o(2115),a=o(1349),n=o(5695),l=o(6403);let i=e=>{let{username:t,password:o,rememberMe:i}=e,[c,d]=(0,r.useState)(!1),u=(0,n.useRouter)(),h=async e=>{var s,r,n,c,h,g,m,p,v,f,x,w;if(e.preventDefault(),!(null==t?void 0:t.trim()))return void a.oR.error("Please enter your username");if(!(null==o?void 0:o.trim()))return void a.oR.error("Please enter your password");d(!0);try{let e=await l.FH.signin({username:t.trim(),password:o.trim(),rememberMe:!!i});if((null==(s=e.data)?void 0:s.success)||200===e.status)a.oR.success("Login successful! Welcome back! \uD83C\uDF89"),(null==(r=e.data)?void 0:r.token)&&(i?localStorage.setItem("authToken",e.data.token):sessionStorage.setItem("authToken",e.data.token)),setTimeout(()=>{u.push("/dashboard")},1500);else throw Error((null==(n=e.data)?void 0:n.message)||"Login failed")}catch(t){let e="Sign-in failed. Please try again.";"ECONNREFUSED"===t.code||"ERR_NETWORK"===t.code?e="Cannot connect to server. Please check your connection.":(null==(c=t.response)?void 0:c.status)===401?e=(null==(f=t.response)||null==(v=f.data)?void 0:v.message)||"Invalid username or password":(null==(h=t.response)?void 0:h.status)===400?e=(null==(w=t.response)||null==(x=w.data)?void 0:x.message)||"Invalid request data":(null==(g=t.response)?void 0:g.status)===500?e="Server error. Please try again later.":(null==(p=t.response)||null==(m=p.data)?void 0:m.message)&&(e=t.response.data.message),a.oR.error(e)}finally{d(!1)}};return(0,s.jsxs)("button",{type:"submit",className:"w-full relative overflow-hidden rounded-2xl py-4 px-6 font-semibold text-white transition-all duration-300 transform ".concat(!c&&(null==t?void 0:t.trim())&&(null==o?void 0:o.trim())?"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 hover:scale-105 hover:shadow-2xl active:scale-95":"bg-gray-400 cursor-not-allowed"," shadow-lg"),onClick:h,disabled:c||!(null==t?void 0:t.trim())||!(null==o?void 0:o.trim()),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 opacity-0 hover:opacity-100 transition-opacity duration-300"}),(0,s.jsx)("div",{className:"relative flex items-center justify-center space-x-3",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,s.jsx)("span",{className:"text-lg",children:"Signing In..."}),(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce delay-100"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce delay-200"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"text-lg",children:"Sign In"}),(0,s.jsx)("svg",{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),!c&&(0,s.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-white opacity-0 hover:opacity-10 transition-opacity duration-300"})]})};function c(){let[e,t]=(0,r.useState)(!1),[o,n]=(0,r.useState)(!1),[l,c]=(0,r.useState)({username:"",password:""}),d=()=>{n(!o)},u=e=>{let{name:t,value:o}=e.target;c(e=>({...e,[t]:o}))};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center p-4",children:[(0,s.jsx)(a.N9,{autoClose:3e3,position:"top-center",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,theme:"light"}),(0,s.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,s.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")"}})}),(0,s.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,s.jsx)("div",{className:"absolute -top-8 -left-8 w-16 h-16 bg-white/20 rounded-full blur-xl animate-pulse"}),(0,s.jsx)("div",{className:"absolute -bottom-8 -right-8 w-20 h-20 bg-white/10 rounded-full blur-xl animate-pulse delay-1000"}),(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-purple-400/20 rounded-full -translate-x-10 -translate-y-10"}),(0,s.jsx)("div",{className:"absolute bottom-0 right-0 w-16 h-16 bg-gradient-to-tl from-pink-400/20 to-purple-400/20 rounded-full translate-x-8 translate-y-8"}),(0,s.jsxs)("div",{className:"text-center mb-8 relative",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl mb-4 shadow-lg",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Farmers Fertilizer"}),(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:"Product Management System"}),(0,s.jsx)("div",{className:"w-20 h-1 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mx-auto mt-3"})]}),(0,s.jsxs)("form",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Username"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",className:"w-full pl-12 pr-4 py-4 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-gray-800 placeholder-gray-400",placeholder:"Enter your username",value:l.username,onChange:u,required:!0})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsx)("input",{type:e?"text":"password",id:"password",name:"password",className:"w-full pl-12 pr-14 py-4 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-gray-800 placeholder-gray-400",placeholder:"Enter your password",value:l.password,onChange:u,required:!0}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors",onClick:()=>{t(!e)},children:e?(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,s.jsxs)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{type:"button",className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(o?"bg-blue-600":"bg-gray-200"),onClick:d,children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform duration-300 ".concat(o?"translate-x-6":"translate-x-1")})}),(0,s.jsx)("label",{className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",onClick:d,children:"Remember me for 30 days"})]})}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(i,{username:l.username,password:l.password,rememberMe:o})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{children:"Secure login powered by JWT"})]}),(0,s.jsx)("div",{className:"mt-4 text-xs text-gray-400",children:"Developed by Creative Hub \xa9 2025"})]})]})]})]})}o(5716)},6102:(e,t,o)=>{Promise.resolve().then(o.bind(o,2928))},6403:(e,t,o)=>{"use strict";o.d(t,{FH:()=>i});var s=o(3464);let r="https://your-railway-app.railway.app";console.log("\uD83C\uDF31 Farmers Ferts API URL:",r);let a={signin:"/signin",signout:"/signout",authCheck:"/auth/check",products:"/api/products",productById:e=>"/api/products/".concat(e),batches:"/api/batches",batchById:e=>"/api/batches/".concat(e),productView:e=>"/api/product-view/".concat(e),analytics:"/api/analytics/dashboard",storageInfo:"/api/storage-info",health:"/health"},n=s.A.create({baseURL:r,timeout:6e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});n.interceptors.request.use(e=>{var t;console.log("\uD83C\uDF31 API Request:",{method:null==(t=e.method)?void 0:t.toUpperCase(),endpoint:e.url,fullURL:"".concat(e.baseURL).concat(e.url),origin:window.location.origin});{let t=localStorage.getItem("authToken")||sessionStorage.getItem("authToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>(console.error("❌ Request Error:",e),Promise.reject(e))),n.interceptors.response.use(e=>{var t;return console.log("✅ API Success:",{status:e.status,endpoint:e.config.url,success:null==(t=e.data)?void 0:t.success}),e},e=>{var t,o,s,a;return(console.error("❌ API Error:",{message:e.message,code:e.code,status:null==(t=e.response)?void 0:t.status,endpoint:null==(o=e.config)?void 0:o.url,data:null==(s=e.response)?void 0:s.data}),"ERR_NETWORK"!==e.code&&e.response)?"ERR_BLOCKED_BY_CLIENT"===e.code||e.message.includes("CORS")?(console.error("\uD83D\uDD34 CORS ERROR - Backend not allowing frontend origin"),Promise.reject({...e,message:"CORS error. Please check server configuration."})):((null==(a=e.response)?void 0:a.status)===401&&(console.warn("\uD83D\uDD10 Authentication failed, clearing tokens"),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),window.location.pathname.includes("/")&&"/dashboard"!==window.location.pathname||(window.location.href="/")),Promise.reject(e)):(console.error("\uD83D\uDD34 NETWORK ERROR - Check if backend is running on",r),Promise.reject({...e,message:"Network error. Please check if the server is running."}))});let l=async()=>{try{console.log("\uD83E\uDDEA Testing API connection...");let e=await fetch("".concat(r,"/health"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)return console.error("❌ API Connection failed:",e.status,e.statusText),{success:!1,error:"HTTP ".concat(e.status)};{let t=await e.json();return console.log("✅ API Connection successful:",t),{success:!0,data:t}}}catch(e){return console.error("❌ API Connection test failed:",e),{success:!1,error:e.message}}},i={testConnection:l,async signin(e){try{console.log("\uD83D\uDD10 Attempting login...");let t=await n.post(a.signin,e);return console.log("✅ Login successful"),t}catch(e){var t,o;throw console.error("\uD83D\uDD10 Login failed:",(null==(o=e.response)||null==(t=o.data)?void 0:t.message)||e.message),e}},async signout(){try{console.log("\uD83D\uDD10 Signing out...");let e=await n.post(a.signout);return localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),console.log("✅ Signout successful"),e}catch(e){throw console.error("\uD83D\uDD10 Signout failed:",e),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),e}},async checkAuth(){try{return await n.get(a.authCheck)}catch(e){throw console.error("\uD83D\uDD10 Auth check failed:",e),e}},async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;console.log("\uD83D\uDCE6 Fetching products...");let o=await n.get(a.products,{params:e});return console.log("✅ Fetched ".concat((null==(t=o.data.products)?void 0:t.length)||0," products")),o}catch(e){throw console.error("\uD83D\uDCE6 Failed to fetch products:",e),e}},async createProduct(e){try{console.log("\uD83D\uDCE6 Creating product...");let t=await n.post(a.products,e,{headers:{"Content-Type":"multipart/form-data"},timeout:12e4});return console.log("✅ Product created successfully"),t}catch(e){throw console.error("\uD83D\uDCE6 Failed to create product:",e),e}},async updateProduct(e,t){try{console.log("\uD83D\uDCE6 Updating product:",e);let o=await n.put(a.productById(e),t,{headers:t instanceof FormData?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"},timeout:12e4});return console.log("✅ Product updated successfully"),o}catch(e){throw console.error("\uD83D\uDCE6 Failed to update product:",e),e}},async deleteProduct(e){try{console.log("\uD83D\uDCE6 Deleting product:",e);let t=await n.delete(a.productById(e));return console.log("✅ Product deleted successfully"),t}catch(e){throw console.error("\uD83D\uDCE6 Failed to delete product:",e),e}},async getBatches(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;console.log("\uD83C\uDFF7️ Fetching batches...");let o=await n.get(a.batches,{params:e});return console.log("✅ Fetched ".concat((null==(t=o.data.batches)?void 0:t.length)||0," batches")),o}catch(e){throw console.error("\uD83C\uDFF7️ Failed to fetch batches:",e),e}},async createBatch(e){try{console.log("\uD83C\uDFF7️ Creating batch...");let t=await n.post(a.batches,e);return console.log("✅ Batch created successfully"),t}catch(e){throw console.error("\uD83C\uDFF7️ Failed to create batch:",e),e}},async updateBatch(e,t){try{console.log("\uD83C\uDFF7️ Updating batch:",e);let o=await n.put(a.batchById(e),t);return console.log("✅ Batch updated successfully"),o}catch(e){throw console.error("\uD83C\uDFF7️ Failed to update batch:",e),e}},async deleteBatch(e){try{console.log("\uD83C\uDFF7️ Deleting batch:",e);let t=await n.delete(a.batchById(e));return console.log("✅ Batch deleted successfully"),t}catch(e){throw console.error("\uD83C\uDFF7️ Failed to delete batch:",e),e}},async getProductView(e){try{console.log("\uD83D\uDC41️ Fetching product view for batch:",e);let t=await n.get(a.productView(e));return console.log("✅ Product view fetched successfully"),t}catch(e){throw console.error("\uD83D\uDC41️ Failed to fetch product view:",e),e}},async getAnalytics(){try{console.log("\uD83D\uDCCA Fetching analytics...");let e=await n.get(a.analytics);return console.log("✅ Analytics fetched successfully"),e}catch(e){throw console.error("\uD83D\uDCCA Failed to fetch analytics:",e),e}},async getStorageInfo(){try{return await n.get(a.storageInfo)}catch(e){throw console.error("\uD83D\uDCBE Failed to get storage info:",e),e}},async getHealth(){try{return await n.get(a.health)}catch(e){throw console.error("\uD83C\uDFE5 Health check failed:",e),e}}};setTimeout(()=>{l().then(e=>{e.success||console.warn("⚠️ Initial API connection test failed. Please ensure backend is running.")})},1e3)}},e=>{var t=t=>e(e.s=t);e.O(0,[797,794,546,441,684,358],()=>t(6102)),_N_E=e.O()}]);